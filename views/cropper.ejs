<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grouper</title>
    <link href="https://fonts.googleapis.com/css2?family=Staatliches&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&family=Roboto:wght@100&display=swap" rel="stylesheet">

    <style>
           body {
            margin : 0 auto;
            background : linear-gradient(to top ,  #242424 ,  #4766ff  );
         }
         #title-container {
   
            color : white;
            font-family: 'Staatliches', cursive;
   
   
            background: #242424;
            display: flex;
            flex-direction: row;
  
            justify-content: center;
            align-items: center;

            width : 100%;
            height : 50px
  

        }
        canvas{
            border : 0.5em solid #946cd9;
            margin-top : 5em;
            margin-bottom: 2em;
            border-radius: 2em;
        }
        #range{
         -webkit-appearance: none;
         width: 30%;
         height: 15px;
         border-radius: 5px;  
         background: #d3d3d3;
         outline: none;
         opacity: 0.7;
        -webkit-transition: .2s;
         transition: opacity .2s;
         margin-bottom: 3em;
        }
        #range::-webkit-slider-thumb {
        -webkit-appearance: none;
         appearance: none;
         width: 25px;
         height: 25px;
         border-radius: 50%; 
         background: #914dff;
         cursor: pointer;
    }
    #crop-container{
      background: #242424;
      margin-top: 3em;
      display : flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

        </style>
</head>
<body>
      
    <header>
      <div id = "title-container" class = "container">
        <h1 id = "title">Grouper</h1>
        </div>

       </header>
       <main>
         
         <div id = "crop-container" class = "container">
          <p id = "path"><%=path%></p>
            
             <input type = "range" min = "0" max = "100" value = "0" id = "range"/>
             </div>
        
        
           </main>


    

<script>
  

 let canvas;
 let ctx;
 let image;
 let dragging = false;
 let mouseX;
 let mouseY;
 

 image = new Image();

 image.onload = function(){
 
 canvas = document.createElement('canvas');
 canvas.width = image.naturalWidth;
 canvas.height = image.naturalHeight;

 ctx = canvas.getContext('2d');

 ctx.drawImage(image , 0 , 0 , image.naturalWidth , image.naturalHeight)

 canvas.addEventListener('click' , function(event){

 

 })
 
 canvas.addEventListener('mousedown' , function(event){

  dragging = true;

  mouseX = event.x - 150;
  mouseY = event.y - 230;
  console.log(mouseX);
  console.log(mouseY);
 
 });
 canvas.addEventListener('mouseup' , function(){

dragging = false;

});

canvas.addEventListener('mousemove' , function(event){

   if(dragging)
   {
     ctx.clearRect(0 , 0 , canvas.width , canvas.height);
     ctx.drawImage(image , 0 , 0 , image.naturalWidth , image.naturalHeight);
     ctx.fillStyle = 'rgba(138, 138, 138 , 0.4)';
     ctx.fillRect(mouseX, mouseY , event.clientX-canvas.width , event.clientY);
     
   }

});




document.getElementById('crop-container').appendChild(canvas);




 
 
 };

 image.src = document.getElementById('path').innerHTML;

 


 


  
  

    </script>
</body>
</html>